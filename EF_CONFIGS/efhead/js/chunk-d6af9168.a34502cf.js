(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6af9168"],{"02f4":function(e,t,n){var a=n("4588"),i=n("be13");e.exports=function(e){return function(t,n){var r,o,c=String(i(t)),l=a(n),s=c.length;return l<0||l>=s?e?"":void 0:(r=c.charCodeAt(l),r<55296||r>56319||l+1===s||(o=c.charCodeAt(l+1))<56320||o>57343?e?c.charAt(l):r:e?c.slice(l,l+2):o-56320+(r-55296<<10)+65536)}}},"0390":function(e,t,n){"use strict";var a=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},"0bfb":function(e,t,n){"use strict";var a=n("cb7c");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},1436:function(e,t,n){"use strict";n.r(t);n("386d");var a=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticClass:"taskForm",attrs:{inline:"",model:e.search}},[t("el-form-item",{attrs:{label:"",prop:"instance"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入实例名称",clearable:"",maxlength:32},on:{clear:e.handleSearch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.search.Instance,callback:function(t){e.$set(e.search,"Instance",t)},expression:"search.Instance"}})],1),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")])],1),t("el-table",{attrs:{stripe:"","header-cell-style":{background:"#ddd",color:"#333"},data:e.tableData.slice((e.page.index-1)*e.page.size,e.page.size*e.page.index),border:""}},[t("el-table-column",{attrs:{prop:"Instance",label:"Instance"}}),t("el-table-column",{attrs:{prop:"Alias",label:"Alias"}}),t("el-table-column",{attrs:{prop:"FullCron",label:"FullCron"}}),t("el-table-column",{attrs:{prop:"DeltaCron",label:"DeltaCron"}}),t("el-table-column",{attrs:{prop:"ReadFrom",label:"ReadFrom"}}),t("el-table-column",{attrs:{prop:"WriteTo",label:"WriteTo"}}),t("el-table-column",{attrs:{prop:"SearchFrom",label:"SearchFrom"}}),t("el-table-column",{attrs:{prop:"InstanceType",width:"160px",label:"InstanceType"}}),t("el-table-column",{attrs:{prop:"IsVirtualPipe",label:"IsVirtualPipe"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("div",[e._v(e._s(a.IsVirtualPipe))])]}}])}),t("el-table-column",{attrs:{prop:"OpenTrans",label:"OpenTrans"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("div",[e._v(e._s(a.OpenTrans))])]}}])}),t("el-table-column",{attrs:{prop:"",label:""},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("div",{staticClass:"flex flex-around"},[t("el-popover",{attrs:{trigger:"click"}},[t("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("信息")]),t("ul",[t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleStatus(a)}}},[e._v("任务状态")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleDetail(a)}}},[e._v("任务信息")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleConfig(a)}}},[e._v("任务配置")])],1)],1),t("el-popover",{attrs:{trigger:"click"}},[t("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("管理")]),t("ul",[t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleReload(a)}}},[e._v("任务重载")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleStop(a)}}},[e._v("停止增量任务")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleResume(a)}}},[e._v("恢复增量任务")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleRun(a)}}},[e._v("立即运行增量任务")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleStopFull(a)}}},[e._v("停止全量任务")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleResumeFull(a)}}},[e._v("恢复全量任务")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleRunFull(a)}}},[e._v("立即运行全量任务")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleDelete(a)}}},[e._v("删除任务")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleDeleteData(a)}}},[e._v("删除任务数据")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleResetTask(a)}}},[e._v("重置任务状态")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleReset(a)}}},[e._v("重置断路器")])],1)],1)],1)]}}])})],1),t("div",{staticClass:"page"},[t("el-pagination",{attrs:{"current-page":e.page.index,"page-size":e.page.size,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total,background:""},on:{"size-change":e.handlePageSize,"current-change":e.handlePageIndex}})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.visible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[t("code",[t("pre",{domProps:{innerHTML:e._s(e.detail)}})])]),t("el-dialog",{attrs:{title:"任务配置",visible:e.showXML,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showXML=t}}},[t("codemirror",{attrs:{options:e.cmOptions},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)],1)},i=[],r=(n("a481"),n("8615"),n("ac6a"),n("9b0e")),o={data:function(){return{code:"",showXML:!1,tableData:[],cmOptions:{tabSize:4,mode:"text/xml",theme:"ayu-dark",lineNumbers:!0,line:!0,readOnly:!0,matchBrackets:!0},originData:[],search:{Instance:""},visible:!1,page:{index:1,size:10,total:0},detail:"",dialogTitle:""}},methods:{handlePageSize:function(e){this.page.index=1,this.page.size=e},handlePageIndex:function(e){this.page.index=e},handleResetTask:function(e){var t=this;this.$confirm("是否重置该任务状态？","提示",{type:"warning"}).then((function(){r["a"].efm_doaction({ac:"resetInstanceState",instance:e.Instance}).then((function(e){t.$notify({title:"成功",message:"重置成功",duration:15e3})}))}))},handleReset:function(e){var t=this;this.$confirm("是否重置该任务断路器？","提示",{type:"warning"}).then((function(){r["a"].efm_doaction({ac:"resetBreaker",instance:e.Instance}).then((function(e){t.$notify({title:"成功",message:"重置成功",duration:15e3})}))}))},handleStatus:function(e){var t=this;this.dialogTitle="任务状态",r["a"].efm_doaction({ac:"getInstanceInfo",instance:e.Instance}).then((function(e){var n=e.response.datas,a={task:n.task};t.detail=t.syntaxHighlight(a),t.visible=!0}))},handleDetail:function(e){var t=this;this.dialogTitle="任务信息",r["a"].efm_doaction({ac:"getInstanceInfo",instance:e.Instance}).then((function(e){var n=e.response.datas,a={computer:n.computer,reader:n.reader,writer:n.writer};t.detail=t.syntaxHighlight(a),t.visible=!0}))},handleDeleteData:function(e){var t=this;this.$confirm("是否删除该任务数据？","提示",{type:"warning"}).then((function(){r["a"].efm_doaction({ac:"deleteInstanceData",instance:e.Instance}).then((function(e){t.$notify({title:"成功",message:"删除成功",duration:15e3})}))}))},handleDelete:function(e){var t=this;this.$confirm("是否删除该任务？","提示",{type:"warning"}).then((function(){r["a"].efm_doaction({ac:"removeInstance",instance:e.Instance}).then((function(e){t.$notify({title:"成功",message:"删除成功",duration:15e3})}))}))},handleRun:function(e){var t=this;r["a"].efm_doaction({ac:"runNow",instance:e.Instance,jobtype:"increment"}).then((function(e){t.$notify({title:"成功",message:"运行增量任务成功",type:"success",duration:15e3})}))},handleReload:function(e){var t=this;r["a"].efm_doaction({ac:"reloadinstance",instance:e.Instance,reset:"false",runtype:"-1"}).then((function(e){t.$notify({title:"成功",message:"任务重载成功",type:"success",duration:15e3})}))},handleRunFull:function(e){var t=this;r["a"].efm_doaction({ac:"runNow",instance:e.Instance,jobtype:"full"}).then((function(e){t.$notify({title:"成功",message:"运行全量任务成功",type:"success",duration:15e3})}))},handleResume:function(e){var t=this;r["a"].efm_doaction({ac:"resumeInstance",instance:e.Instance,type:"increment"}).then((function(e){t.$notify({title:"成功",message:"恢复增量任务成功",type:"success",duration:15e3})}))},handleResumeFull:function(e){var t=this;r["a"].efm_doaction({ac:"resumeInstance",instance:e.Instance,type:"full"}).then((function(e){t.$notify({title:"成功",message:"恢复全量任务成功",type:"success",duration:15e3})}))},handleStop:function(e){var t=this;r["a"].efm_doaction({ac:"stopInstance",instance:e.Instance,type:"increment"}).then((function(e){t.$notify({title:"成功",message:"停止增量任务成功",type:"success",duration:15e3})}))},handleStopFull:function(e){var t=this;r["a"].efm_doaction({ac:"stopInstance",instance:e.Instance,type:"full"}).then((function(e){t.$notify({title:"成功",message:"停止全量任务成功",type:"success",duration:15e3})}))},handleSearch:function(){var e=this,t=[];this.originData.filter((function(n){for(var a in e.search)-1!==n[a].indexOf(e.search[a])&&t.push(n)})),this.tableData=t,this.page.total=t.length},handleConfig:function(e){var t=this;r["a"].efm_doaction({ac:"getInstanceXml",instance:e.Instance}).then((function(e){var n=e.response.datas;t.code="string"===typeof n?n:"",t.showXML=!0}))},getTaskList:function(){var e=this;r["a"].efm_doaction({ac:"getinstances"}).then((function(t){var n=[];Object.values(t.response.datas).forEach((function(e){n=n.concat(e)})),e.page.total=n.length,e.tableData=Object.assign([],n),e.originData=Object.assign([],n)}))},syntaxHighlight:function(e){return"string"!==typeof e&&(e=JSON.stringify(e,void 0,2)),e=e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"}))}},created:function(){this.getTaskList()}},c=o,l=(n("f2c9"),n("2877")),s=Object(l["a"])(c,a,i,!1,null,"537583a3",null);t["default"]=s.exports},"214f":function(e,t,n){"use strict";n("b0c5");var a=n("2aba"),i=n("32e9"),r=n("79e5"),o=n("be13"),c=n("2b4c"),l=n("520a"),s=c("species"),u=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=c(e),p=!r((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),h=p?!r((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[s]=function(){return n}),n[f](""),!t})):void 0;if(!p||!h||"replace"===e&&!u||"split"===e&&!d){var v=/./[f],g=n(o,f,""[e],(function(e,t,n,a,i){return t.exec===l?p&&!i?{done:!0,value:v.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}})),m=g[0],b=g[1];a(String.prototype,e,m),i(RegExp.prototype,f,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"386d":function(e,t,n){"use strict";var a=n("cb7c"),i=n("83a1"),r=n("5f1b");n("214f")("search",1,(function(e,t,n,o){return[function(n){var a=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,a):new RegExp(n)[t](String(a))},function(e){var t=o(n,e,this);if(t.done)return t.value;var c=a(e),l=String(this),s=c.lastIndex;i(s,0)||(c.lastIndex=0);var u=r(c,l);return i(c.lastIndex,s)||(c.lastIndex=s),null===u?-1:u.index}]}))},"504c":function(e,t,n){var a=n("9e1e"),i=n("0d58"),r=n("6821"),o=n("52a7").f;e.exports=function(e){return function(t){var n,c=r(t),l=i(c),s=l.length,u=0,d=[];while(s>u)n=l[u++],a&&!o.call(c,n)||d.push(e?[n,c[n]]:c[n]);return d}}},"520a":function(e,t,n){"use strict";var a=n("0bfb"),i=RegExp.prototype.exec,r=String.prototype.replace,o=i,c="lastIndex",l=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e[c]||0!==t[c]}(),s=void 0!==/()??/.exec("")[1],u=l||s;u&&(o=function(e){var t,n,o,u,d=this;return s&&(n=new RegExp("^"+d.source+"$(?!\\s)",a.call(d))),l&&(t=d[c]),o=i.call(d,e),l&&o&&(d[c]=d.global?o.index+o[0].length:t),s&&o&&o.length>1&&r.call(o[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)})),o}),e.exports=o},"5f1b":function(e,t,n){"use strict";var a=n("23c6"),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var r=n.call(e,t);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==a(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},8615:function(e,t,n){var a=n("5ca1"),i=n("504c")(!1);a(a.S,"Object",{values:function(e){return i(e)}})},a481:function(e,t,n){"use strict";var a=n("cb7c"),i=n("4bf8"),r=n("9def"),o=n("4588"),c=n("0390"),l=n("5f1b"),s=Math.max,u=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};n("214f")("replace",2,(function(e,t,n,v){return[function(a,i){var r=e(this),o=void 0==a?void 0:a[t];return void 0!==o?o.call(a,r,i):n.call(String(r),a,i)},function(e,t){var i=v(n,e,this,t);if(i.done)return i.value;var d=a(e),f=String(this),p="function"===typeof t;p||(t=String(t));var m=d.global;if(m){var b=d.unicode;d.lastIndex=0}var y=[];while(1){var x=l(d,f);if(null===x)break;if(y.push(x),!m)break;var S=String(x[0]);""===S&&(d.lastIndex=c(f,r(d.lastIndex),b))}for(var k="",I=0,w=0;w<y.length;w++){x=y[w];for(var _=String(x[0]),L=s(u(o(x.index),f.length),0),O=[],T=1;T<x.length;T++)O.push(h(x[T]));var R=x.groups;if(p){var $=[_].concat(O,L,f);void 0!==R&&$.push(R);var D=String(t.apply(void 0,$))}else D=g(_,f,L,O,R,t);L>=I&&(k+=f.slice(I,L)+D,I=L+_.length)}return k+f.slice(I)}];function g(e,t,a,r,o,c){var l=a+e.length,s=r.length,u=p;return void 0!==o&&(o=i(o),u=f),n.call(c,u,(function(n,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,a);case"'":return t.slice(l);case"<":c=o[i.slice(1,-1)];break;default:var u=+i;if(0===u)return n;if(u>s){var f=d(u/10);return 0===f?n:f<=s?void 0===r[f-1]?i.charAt(1):r[f-1]+i.charAt(1):n}c=r[u-1]}return void 0===c?"":c}))}}))},ac6a:function(e,t,n){for(var a=n("cadf"),i=n("0d58"),r=n("2aba"),o=n("7726"),c=n("32e9"),l=n("84f2"),s=n("2b4c"),u=s("iterator"),d=s("toStringTag"),f=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(p),v=0;v<h.length;v++){var g,m=h[v],b=p[m],y=o[m],x=y&&y.prototype;if(x&&(x[u]||c(x,u,f),x[d]||c(x,d,m),l[m]=f,b))for(g in a)x[g]||r(x,g,a[g],!0)}},b0c5:function(e,t,n){"use strict";var a=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},f2c9:function(e,t,n){"use strict";n("fdd0")},fdd0:function(e,t,n){}}]);