(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d4db9ba"],{"0a49":function(e,t,n){var i=n("9b43"),a=n("626a"),r=n("4bf8"),o=n("9def"),c=n("cd1c");e.exports=function(e,t){var n=1==e,s=2==e,l=3==e,d=4==e,u=6==e,f=5==e||u,h=t||c;return function(t,c,g){for(var b,m,v=r(t),p=a(v),y=i(c,g,3),k=o(p.length),w=0,S=n?h(t,k):s?h(t,0):void 0;k>w;w++)if((f||w in p)&&(b=p[w],m=y(b,w,v),e))if(n)S[w]=m;else if(m)switch(e){case 3:return!0;case 5:return b;case 6:return w;case 2:S.push(b)}else if(d)return!1;return u?-1:l||d?d:S}}},"0c8b":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"z-index":"9999","font-size":"12px",position:"relative",top:"30px",left:"30px",width:"100%","min-height":"55px"},attrs:{id:"view_control"}},[t("div",{staticStyle:{float:"right",margin:"10px 30px 0 0"},attrs:{id:"search_view"}},[t("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"追踪的字段名",clearable:"",maxlength:32},model:{value:e.trackField,callback:function(t){e.trackField=t},expression:"trackField"}}),t("br"),t("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"追踪的字段值",clearable:"",maxlength:32},model:{value:e.trackValue,callback:function(t){e.trackValue=t},expression:"trackValue"}}),t("br"),t("a",{staticClass:"el-button el-button--success",on:{click:function(t){return e.track()}}},[e._v(e._s(e.trackButton))])],1),t("div",{staticStyle:{float:"left"}},[t("a",{staticClass:"el-button el-button--success is-plain",on:{click:function(t){return e.drawChart("circle")}}},[e._v("环形图")]),t("br"),t("a",{staticClass:"el-button el-button--primary is-plain",on:{click:function(t){return e.drawChart("tree")}}},[e._v("树形图")])]),t("div",{staticStyle:{display:"none",float:"left",margin:"10px 0 0 10px"},attrs:{id:"tree_view"}},[t("i",{staticClass:"el-icon-caret-right"}),e._v(" 箭头方向表示数据流向"),t("br"),t("em",{staticClass:"color-block",staticStyle:{background:"#999"}}),e._v(" 灰色表示是孤立节点"),t("br"),t("em",{staticClass:"color-block",staticStyle:{background:"#87b9ed"}}),e._v(" 深蓝色表示是结束节点"),t("br"),t("em",{staticClass:"color-block",staticStyle:{background:"#ff6e00"}}),e._v(" 橙色表示节点非健康状态"),t("br"),e._v("(节点中断或未打开读写)\n    ")]),t("div",{staticStyle:{display:"none",float:"left",margin:"10px 0 0 10px"},attrs:{id:"circle_view"}},[t("i",{staticClass:"el-icon-caret-right"}),e._v(" 箭头方向表示数据流向"),t("br"),t("i",{staticClass:"el-icon-minus"}),e._v(" 实线表示建立连接"),t("br"),t("i",{staticClass:"el-icon-more"}),e._v(" 虚线表示未建立连接"),t("br"),t("i",{staticClass:"el-icon-star-on"}),e._v(" 线上数据表示数据处理量\n    ")])]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"550px"},attrs:{id:"relation"}})])},a=[],r=(n("7514"),n("7f7f"),n("20d6"),n("ac6a"),n("8615"),n("313e")),o=n("ed89"),c={data:function(){return{loading:!0,trackField:"",trackValue:"",startTrack:!1,isProcessing:!1,trackButton:"开始追踪"}},mounted:function(){this.chart=r["a"](document.getElementById("relation")),this.drawChart("circle")},beforeDestroy:function(){clearInterval(this.interval_ins1),clearInterval(this.interval_ins2)},methods:{track:function(){this.startTrack=!this.startTrack,this.trackButton=this.startTrack?"停止追踪":"开始追踪"},drawChart:function(e){switch(this.loading=!0,clearInterval(this.interval_ins1),clearInterval(this.interval_ins2),e){case"tree":this.scheduletree(this.chart),document.getElementById("tree_view").style.display="block",document.getElementById("circle_view").style.display="none";break;case"circle":document.getElementById("tree_view").style.display="none",document.getElementById("circle_view").style.display="block",this.schedulecircle(this.chart);break;default:break}this.loading=!1},schedulecircle:function(e){var t=this;this.handlecircle(e),this.interval_ins1=setInterval((function(){t.isProcessing||t.handlecircle(e)}),3e3)},handlecircle:function(e){var t=this;this.isProcessing=!0,o["a"].efm_doaction({ac:"instanceflowgraph",track:this.startTrack,track_field:this.trackField,track_value:this.trackValue}).then((function(n){var i=n.response.datas,a=[{name:"M"},{name:"S"},{name:"B"},{name:"E"}],r={nodes:Object.values(i.nodes).map((function(e,t){return{id:e.Instance,name:e.Alias,symbolSize:20,category:a.findIndex((function(t){return t.name===e.attribute})),x:0,y:0}})),links:Object.values(i.edges).map((function(e){return{source:e.to,target:e.from,label:{show:!0,formatter:function(t){return e.weight}},lineStyle:{normal:{type:e.isconnect?"solid":"dashed",color:e.isconnect?"#197700":"#aa1a12"},emphasis:{type:e.isconnect?"solid":"dashed",color:e.isconnect?"#197700":"#aa1a12"}}}})),categories:a};t.$nextTick((function(){t.drawcircle(r,e)})),t.isProcessing=!1}))},drawcircle:function(e,t){var n={legend:[{data:e.categories.map((function(e){return e.name}))}],animationDuration:1500,animationEasingUpdate:"quinticInOut",series:[{type:"graph",layout:"circular",data:e.nodes,links:e.links,categories:e.categories,roam:!0,edgeSymbol:["arrow"],edgeLabel:{fontSize:14},label:{show:!0,position:"right",formatter:"{b}"},emphasis:{focus:"adjacency",lineStyle:{width:2}},scaleLimit:{min:.4,max:2},lineStyle:{width:1,curveness:.2}}]};t.setOption(n)},scheduletree:function(e){var t=this;this.handletree(e),this.interval_ins2=setInterval((function(){t.isProcessing||t.handletree(e)}),3e3)},handletree:function(e){var t=this;this.isProcessing=!0,this.trackButton=this.startTrack?"停止追踪":"开始追踪",o["a"].efm_doaction({ac:"instanceflowgraph",track:this.startTrack,track_field:this.trackField,track_value:this.trackValue}).then((function(n){var i=n.response.datas,a=[{name:"M"},{name:"S"},{name:"B"},{name:"E"}],r={nodes:Object.values(i.nodes).map((function(e,t){return{id:e.Instance,name:e.Alias,symbolSize:20,status:e.instance_status,category:a.findIndex((function(t){return t.name===e.attribute}))}})),links:Object.values(i.edges).map((function(e){return{source:e.to,target:e.from,weight:e.weight,isconnect:e.isconnect}})),categories:a},o={fontSize:13,fontWeight:"bold",lineHeight:21,borderWidth:1,padding:2,borderRadius:10,align:"center",overflow:"breakAll",backgroundColor:"#ecf5ff",borderColor:"#b3d8ff"},c={fontSize:13,fontWeight:"bold",lineHeight:21,borderWidth:1,padding:2,borderRadius:10,align:"center",overflow:"breakAll",backgroundColor:"#b4d9ff",borderColor:"#7ea9d5"},s={fontSize:13,fontWeight:"bold",lineHeight:21,borderWidth:1,padding:2,borderRadius:10,align:"center",overflow:"breakAll",backgroundColor:"#ffc39d",borderColor:"#f38742"},l={fontSize:13,fontWeight:"bold",lineHeight:21,borderWidth:1,padding:2,borderRadius:10,align:"center",overflow:"breakAll",backgroundColor:"#eee",borderColor:"#ccc"},d={fontSize:12,color:"#666",lineHeight:21,padding:10,offset:[-15,-6]},u=function(){var e=r.nodes.filter((function(e){return 1===e.category||2===e.category}));return e},f=function e(t,n,i){var a=r.nodes.find((function(e){return e.id===t}));if(!a)return null;var u=r.links.filter((function(e){return e.target===t})),f=u.map((function(t){return e(t.source,t.weight,t.isconnect)})).filter(Boolean);return{name:n,id:"",category:a.category,label:d,symbol:i?"arrow":"rect",lineStyle:{type:i?"solid":"dashed",color:i?"#197700":"#aa1a12"},itemStyle:{color:i?"#197700":"#aa1a12"},symbolSize:i?8:10,symbolRotate:-90,children:[{id:a.id,name:a.name,label:0==a.status?3==a.category?c:1==a.category?l:o:s,category:a.category,symbolSize:.1,itemStyle:{color:0==a.status?0==a.category?"#2bbedb":2==a.category?"#16ccb6":1==a.category?"#888":"#48838c":"#ff6e00"},children:f}]}},h=u(),g={name:"ROOT",id:"",label:o,symbolSize:.1,category:2,itemStyle:{normal:{color:"#859906",backgroundColor:"#859906"}},children:h.map((function(e){return f(e.id,"",!0)})).filter(Boolean)};t.$nextTick((function(){t.drawtree(g,r,e)})),t.isProcessing=!1}))},drawtree:function(e,t,n){var i={legend:[{data:t.categories.map((function(e){return e.name}))}],tooltip:{trigger:"item"},animationDuration:500,animationEasingUpdate:"quinticInOut",series:[{type:"tree",orient:"horizontal",nodeGap:20,data:[e],categories:t.categories,roam:!0,draggable:!0,expandAndCollapse:!1,edgeSymbol:["arrow"],edgeLabel:{fontSize:14},symbolSize:20,label:{show:!0,position:"right",formatter:"{b}"},emphasis:{focus:"descendant"},scaleLimit:{min:.8,max:3},lineStyle:{width:.5,color:"#197700",curveness:.5}}]};n.setOption(i)}}},s=c,l=(n("bfb5"),n("2877")),d=Object(l["a"])(s,i,a,!1,null,"b686938e",null);t["default"]=d.exports},1169:function(e,t,n){var i=n("2d95");e.exports=Array.isArray||function(e){return"Array"==i(e)}},"134d":function(e,t,n){},"20d6":function(e,t,n){"use strict";var i=n("5ca1"),a=n("0a49")(6),r="findIndex",o=!0;r in[]&&Array(1)[r]((function(){o=!1})),i(i.P+i.F*o,"Array",{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(r)},"504c":function(e,t,n){var i=n("9e1e"),a=n("0d58"),r=n("6821"),o=n("52a7").f;e.exports=function(e){return function(t){var n,c=r(t),s=a(c),l=s.length,d=0,u=[];while(l>d)n=s[d++],i&&!o.call(c,n)||u.push(e?[n,c[n]]:c[n]);return u}}},7514:function(e,t,n){"use strict";var i=n("5ca1"),a=n("0a49")(5),r="find",o=!0;r in[]&&Array(1)[r]((function(){o=!1})),i(i.P+i.F*o,"Array",{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(r)},"7f7f":function(e,t,n){var i=n("86cc").f,a=Function.prototype,r=/^\s*function ([^ (]*)/,o="name";o in a||n("9e1e")&&i(a,o,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(e){return""}}})},8615:function(e,t,n){var i=n("5ca1"),a=n("504c")(!1);i(i.S,"Object",{values:function(e){return a(e)}})},bfb5:function(e,t,n){"use strict";n("134d")},cd1c:function(e,t,n){var i=n("e853");e.exports=function(e,t){return new(i(e))(t)}},e853:function(e,t,n){var i=n("d3f4"),a=n("1169"),r=n("2b4c")("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)||(t=void 0),i(t)&&(t=t[r],null===t&&(t=void 0))),void 0===t?Array:t}}}]);