(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63269f49"],{"0a49":function(e,t,n){var i=n("9b43"),r=n("626a"),a=n("4bf8"),o=n("9def"),c=n("cd1c");e.exports=function(e,t){var n=1==e,l=2==e,s=3==e,d=4==e,u=6==e,f=5==e||u,g=t||c;return function(t,c,h){for(var b,m,v=a(t),p=r(v),y=i(c,h,3),w=o(p.length),S=0,k=n?g(t,w):l?g(t,0):void 0;w>S;S++)if((f||S in p)&&(b=p[S],m=y(b,S,v),e))if(n)k[S]=m;else if(m)switch(e){case 3:return!0;case 5:return b;case 6:return S;case 2:k.push(b)}else if(d)return!1;return u?-1:s||d?d:k}}},"0c8b":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"z-index":"9999","font-size":"12px",position:"relative",top:"30px",left:"30px",width:"300px","min-height":"55px"},attrs:{id:"view_control"}},[t("div",{staticStyle:{float:"left"}},[t("a",{staticClass:"el-button el-button--success is-plain",on:{click:function(t){return e.drawChart("circle")}}},[e._v("环形图")]),t("br"),t("a",{staticClass:"el-button el-button--primary is-plain",on:{click:function(t){return e.drawChart("tree")}}},[e._v("树形图")])]),t("div",{staticStyle:{display:"none",float:"left",margin:"10px 0 0 10px"},attrs:{id:"tree_view"}},[t("i",{staticClass:"el-icon-caret-right"}),e._v(" 箭头方向表示数据流向"),t("br"),t("em",{staticClass:"color-block",staticStyle:{background:"#999"}}),e._v(" 灰色表示是孤立节点"),t("br"),t("em",{staticClass:"color-block",staticStyle:{background:"#87b9ed"}}),e._v(" 深蓝色表示是结束节点"),t("br"),t("em",{staticClass:"color-block",staticStyle:{background:"#ff6e00"}}),e._v(" 橙色表示节点非健康状态"),t("br"),e._v("(节点中断或未打开读写)\n    ")]),t("div",{staticStyle:{display:"none",float:"left",margin:"10px 0 0 10px"},attrs:{id:"circle_view"}},[t("i",{staticClass:"el-icon-caret-right"}),e._v(" 箭头方向表示数据流向"),t("br"),t("i",{staticClass:"el-icon-minus"}),e._v(" 实线表示建立连接"),t("br"),t("i",{staticClass:"el-icon-more"}),e._v(" 虚线表示未建立连接"),t("br"),t("i",{staticClass:"el-icon-star-on"}),e._v(" 线上数据表示数据处理量\n    ")])]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"550px"},attrs:{id:"relation"}})])},r=[],a=(n("7514"),n("7f7f"),n("20d6"),n("ac6a"),n("8615"),n("313e")),o=n("ed89"),c={data:function(){return{loading:!0}},mounted:function(){this.chart=a["a"](document.getElementById("relation")),this.drawChart("circle")},beforeDestroy:function(){clearInterval(this.interval_ins1),clearInterval(this.interval_ins2)},methods:{drawChart:function(e){switch(this.loading=!0,clearInterval(this.interval_ins1),clearInterval(this.interval_ins2),e){case"tree":this.scheduletree(this.chart),document.getElementById("tree_view").style.display="block",document.getElementById("circle_view").style.display="none";break;case"circle":document.getElementById("tree_view").style.display="none",document.getElementById("circle_view").style.display="block",this.schedulecircle(this.chart);break;default:break}this.loading=!1},schedulecircle:function(e){var t=this;this.handlecircle(e),this.interval_ins1=setInterval((function(){t.handlecircle(e)}),3e3)},handlecircle:function(e){var t=this;o["a"].efm_doaction({ac:"instanceflowgraph"}).then((function(n){var i=n.response.datas,r=[{name:"M"},{name:"S"},{name:"B"},{name:"E"}],a={nodes:Object.values(i.nodes).map((function(e,t){return{id:e.Instance,name:e.Alias,symbolSize:20,category:r.findIndex((function(t){return t.name===e.attribute})),x:0,y:0}})),links:Object.values(i.edges).map((function(e){return{source:e.to,target:e.from,label:{show:!0,formatter:function(t){return e.weight}},lineStyle:{normal:{type:e.isconnect?"solid":"dashed",color:e.isconnect?"#197700":"#aa1a12"},emphasis:{type:e.isconnect?"solid":"dashed",color:e.isconnect?"#197700":"#aa1a12"}}}})),categories:r};t.$nextTick((function(){t.drawcircle(a,e)}))}))},drawcircle:function(e,t){var n={legend:[{data:e.categories.map((function(e){return e.name}))}],animationDuration:1500,animationEasingUpdate:"quinticInOut",series:[{type:"graph",layout:"circular",data:e.nodes,links:e.links,categories:e.categories,roam:!0,edgeSymbol:["arrow"],edgeLabel:{fontSize:14},label:{show:!0,position:"right",formatter:"{b}"},emphasis:{focus:"adjacency",lineStyle:{width:2}},scaleLimit:{min:.4,max:2},lineStyle:{width:1,curveness:.2}}]};t.setOption(n)},scheduletree:function(e){var t=this;this.handletree(e),this.interval_ins2=setInterval((function(){t.handletree(e)}),3e3)},handletree:function(e){var t=this;o["a"].efm_doaction({ac:"instanceflowgraph"}).then((function(n){var i=n.response.datas,r=[{name:"M"},{name:"S"},{name:"B"},{name:"E"}],a={nodes:Object.values(i.nodes).map((function(e,t){return{id:e.Instance,name:e.Alias,symbolSize:20,status:e.instance_status,category:r.findIndex((function(t){return t.name===e.attribute}))}})),links:Object.values(i.edges).map((function(e){return{source:e.to,target:e.from,weight:e.weight,isconnect:e.isconnect}})),categories:r},o={fontSize:13,fontWeight:"bold",lineHeight:21,borderWidth:1,padding:2,borderRadius:10,align:"center",overflow:"breakAll",backgroundColor:"#ecf5ff",borderColor:"#b3d8ff"},c={fontSize:13,fontWeight:"bold",lineHeight:21,borderWidth:1,padding:2,borderRadius:10,align:"center",overflow:"breakAll",backgroundColor:"#b4d9ff",borderColor:"#7ea9d5"},l={fontSize:13,fontWeight:"bold",lineHeight:21,borderWidth:1,padding:2,borderRadius:10,align:"center",overflow:"breakAll",backgroundColor:"#ffc39d",borderColor:"#f38742"},s={fontSize:13,fontWeight:"bold",lineHeight:21,borderWidth:1,padding:2,borderRadius:10,align:"center",overflow:"breakAll",backgroundColor:"#eee",borderColor:"#ccc"},d={fontSize:12,color:"#666",lineHeight:21,padding:10,offset:[-15,-6]},u=function(){var e=a.nodes.filter((function(e){return 1===e.category||2===e.category}));return e},f=function e(t,n,i){var r=a.nodes.find((function(e){return e.id===t}));if(!r)return null;var u=a.links.filter((function(e){return e.target===t})),f=u.map((function(t){return e(t.source,t.weight,t.isconnect)})).filter(Boolean);return{name:n,id:"",category:r.category,label:d,symbol:i?"arrow":"rect",itemStyle:{color:i?"#197700":"#aa1a12"},symbolSize:i?8:12,symbolRotate:-90,children:[{id:r.id,name:r.name,label:0==r.status?3==r.category?c:1==r.category?s:o:l,category:r.category,symbolSize:.1,itemStyle:{color:0==r.status?0==r.category?"#2bbedb":2==r.category?"#16ccb6":1==r.category?"#888":"#48838c":"#ff6e00"},children:f}]}},g=u(),h={name:"ROOT",id:"",label:o,symbolSize:.1,category:2,itemStyle:{normal:{color:"#859906",backgroundColor:"#859906"}},children:g.map((function(e){return f(e.id,"",!0)})).filter(Boolean)};t.$nextTick((function(){t.drawtree(h,a,e)}))}))},drawtree:function(e,t,n){var i={legend:[{data:t.categories.map((function(e){return e.name}))}],tooltip:{trigger:"item"},animationDuration:500,animationEasingUpdate:"quinticInOut",series:[{type:"tree",orient:"horizontal",nodeGap:20,data:[e],categories:t.categories,roam:!0,draggable:!0,expandAndCollapse:!1,edgeSymbol:["arrow"],edgeLabel:{fontSize:14},symbolSize:20,label:{show:!0,position:"right",formatter:"{b}"},emphasis:{focus:"descendant"},scaleLimit:{min:.8,max:3},lineStyle:{width:.5,color:"#197700",curveness:.5}}]};n.setOption(i)}}},l=c,s=(n("c1ba"),n("2877")),d=Object(s["a"])(l,i,r,!1,null,"2c234cbd",null);t["default"]=d.exports},1169:function(e,t,n){var i=n("2d95");e.exports=Array.isArray||function(e){return"Array"==i(e)}},"20d6":function(e,t,n){"use strict";var i=n("5ca1"),r=n("0a49")(6),a="findIndex",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),i(i.P+i.F*o,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},"504c":function(e,t,n){var i=n("9e1e"),r=n("0d58"),a=n("6821"),o=n("52a7").f;e.exports=function(e){return function(t){var n,c=a(t),l=r(c),s=l.length,d=0,u=[];while(s>d)n=l[d++],i&&!o.call(c,n)||u.push(e?[n,c[n]]:c[n]);return u}}},7514:function(e,t,n){"use strict";var i=n("5ca1"),r=n("0a49")(5),a="find",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),i(i.P+i.F*o,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},"7f7f":function(e,t,n){var i=n("86cc").f,r=Function.prototype,a=/^\s*function ([^ (]*)/,o="name";o in r||n("9e1e")&&i(r,o,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},8615:function(e,t,n){var i=n("5ca1"),r=n("504c")(!1);i(i.S,"Object",{values:function(e){return r(e)}})},c1ba:function(e,t,n){"use strict";n("ea72")},cd1c:function(e,t,n){var i=n("e853");e.exports=function(e,t){return new(i(e))(t)}},e853:function(e,t,n){var i=n("d3f4"),r=n("1169"),a=n("2b4c")("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}},ea72:function(e,t,n){}}]);